plugins {
	id("net.twisterrob.ghlint.library")
	id("org.gradle.application")
}

dependencies {
	implementation("org.snakeyaml:snakeyaml-engine:2.7")
	implementation("dev.harrel:json-schema:1.5.0")
	implementation("org.json:json:20240205")
	implementation("io.github.detekt.sarif4k:sarif4k:0.5.0")
}

// TODO kotlin.target.compilerOptions { freeCompilerArgs.add("-Xcontext-receivers") }
tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
	compilerOptions {
		freeCompilerArgs.add("-Xcontext-receivers")
	}
}

application {
	mainClass = "net.twisterrob.ghlint.analysis.MainKt"
}
tasks.named("run").configure { JavaExec task -> task.workingDir = rootDir }
